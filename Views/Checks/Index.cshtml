@{
    ViewData["Title"] = "Submission status";
}
<style>
    p {
        font-size: larger;
    }
</style>
<div class="container-fluid">
    <!-- <h2>Report completion status</h2> -->
    <!-- <p>
        The following table lists records that are newly inserted, rejected or have been updated. It also shows submission of report per section but it does not gaurantee if the report submitted is complete and of right quality.
    </p>
    <hr>
    <br />
    <table id="dt2" class="table table-striped table-bordered nowrap" cellspacing="0" width="100%">
        <thead>
            <tr>                      
                <th>
                    Province
                </th>
                <th>
                    District
                </th>
                <th >
                   Facility ID
                </th>
                <th>
                   Facility Name
                </th>
                <th>
                   Implementer
                </th>
                <th>
                   Message
                </th>
                <th>
                   Status
                </th>
                <th>
                   Year
                </th>
                <th>
                    Month
                </th>
                <th>
                    IPD-SAM
                </th>
                <th>
                    IPD-Stock
                </th>
                <th>
                   OPD-SAM
                </th>
                <th>
                    OPD-Stock
                </th>
                <th>
                    OPD-MAM
                </th>
                <th>
                    MAM-Stock
                </th>
                <th>
                    MNS
                </th>
                <th>
                    User Name
                </th>                      
            </tr>
        </thead>
        <tbody></tbody>
    </table>
<br><br> -->
<hr>
<h2>Report overtime submission trend </h2>
    <p>
        This table shows health facilities report submission over time. You can check the progress and entry status of a health facility.
    </p>
    <p>
        <strong>Note:</strong>: This only shows those records that are verified and accepted by administrator.
    </p>        
    <br />

    <table id="dt" class="table table-striped table-bordered nowrap" cellspacing="0" width="100%">
        <thead>
            <tr>                      
                <th>
                    Province
                </th>
                <th>
                    District
                </th>
                <th>
                   Facility ID
                </th>
                <th>
                   Facility Name
                </th>
                <th>
                   Year
                </th>
                <th>
                    M1
                </th>
                <th>
                    M2
                </th>
                <th>
                   M3
                </th>
                <th >
                   M4
                </th>
                <th>
                    M5
                </th>
                <th>
                    M6
                </th>
                <th>
                    M7
                </th>
                <th>
                    M8
                </th>
                <th>
                    M9
                </th>
                <th>
                    M10
                </th>
                <th>
                    M11
                </th>
                <th>
                    M12
                </th>                      
            </tr>
        </thead>
        <tbody></tbody>
        <tfoot>
                 <th>
                    Province
                </th>
                <th>
                    District
                </th>
                <th>
                   Facility ID
                </th>
                <th>
                   Facility Name
                </th>
                <th>
                   Year
                </th>
           
        </tfoot>
    </table>

</div>

@section Scripts{
      <script>
        $(document).ready(function () {
            $('#dt').DataTable({
                responsive: false,
                "lengthMenu":  [[10, 25, 50, -1], [10, 25, 50, "All"]],
                "processing": true,
                "serverSide": false,
                "bStateSave": true,
                "fnStateSave": function (oSettings, oData) {
                    localStorage.setItem('dt', JSON.stringify(oData));
                },
                "fnStateLoad": function (oSettings) {
                    return JSON.parse(localStorage.getItem('dt'));
                },
                "ordering": true,
                "ajax": {
                    "url": "/Checks/reportstat/",
                    "type": "POST"
                },
                "columns": [
                        { "data": "province", "autoWidth": true },
                        { "data": "district", "autoWidth": true },
                        { "data": "facilityID", "autoWidth": true },
                        { "data": "facilityName",  "autoWidth": true },
                        { "data": "year", "autoWidth": true },
                        { "data": "m1", "autoWidth": true },
                        { "data": "m2", "autoWidth": true },
                        { "data": "m3", "autoWidth": true },
                        { "data": "m4", "autoWidth": true },
                        { "data": "m5", "autoWidth": true },
                        { "data": "m6", "autoWidth": true },
                        { "data": "m7", "autoWidth": true },
                        { "data": "m8", "autoWidth": true },
                        { "data": "m9", "autoWidth": true },
                        { "data": "m10", "autoWidth": true },
                        { "data": "m11", "autoWidth": true },
                        { "data": "m12", "autoWidth": true }
                ],
            "columnDefs": [
                {
                    "targets": 5,
                    "data": "m1",
                    "class": 'text-center',
                    "sorting": false,
                    "orderable": false,
                    "render": function (data, type, row) {
                        if (data == 1) {
                            return '<span class="label label-success"><i class="fa fa-check"></i></span>';
                        }
                        if (data == 0) {
                            return '<span class="label label-danger"><i class="fa fa-times"></span>';
                        }
                    }
                },
                {
                    "targets": 6,
                    "data": "m2",
                    "class": 'text-center',
                    "sorting": false,
                    "orderable": false,
                    "render": function (data, type, row) {
                        if (data == 1) {
                            return '<span class="label label-success"><i class="fa fa-check"></i></span>';
                        }
                        if (data == 0) {
                            return '<span class="label label-danger"><i class="fa fa-times"></span>';
                        }
                    }
                },
                {
                    "targets": 7,
                    "data": "m3",
                    "class": 'text-center',
                    "sorting": false,
                    "orderable": false,
                    "render": function (data, type, row) {
                        if (data == 1) {
                            return '<span class="label label-success"><i class="fa fa-check"></i></span>';
                        }
                        if (data == 0) {
                            return '<span class="label label-danger"><i class="fa fa-times"></span>';
                        }
                    }
                },
                {
                    "targets": 8,
                    "data": "m4",
                    "class": 'text-center',
                    "sorting": false,
                    "orderable": false,
                    "render": function (data, type, row) {
                        if (data == 1) {
                            return '<span class="label label-success"><i class="fa fa-check"></i></span>';
                        }
                        if (data == 0) {
                            return '<span class="label label-danger"><i class="fa fa-times"></span>';
                        }
                    }
                },
                {
                    "targets": 9,
                    "data": "m5",
                    "class": 'text-center',
                    "sorting": false,
                    "orderable": false,
                    "render": function (data, type, row) {
                        if (data == 1) {
                            return '<span class="label label-success"><i class="fa fa-check"></i></span>';
                        }
                        if (data == 0) {
                            return '<span class="label label-danger"><i class="fa fa-times"></span>';
                        }
                    }
                },
                {
                    "targets": 10,
                    "data": "m6",
                    "class": 'text-center',
                    "sorting": false,
                    "orderable": false,
                    "render": function (data, type, row) {
                        if (data == 1) {
                            return '<span class="label label-success"><i class="fa fa-check"></i></span>';
                        }
                        if (data == 0) {
                            return '<span class="label label-danger"><i class="fa fa-times"></span>';
                        }
                    }
                },
                {
                    "targets": 11,
                    "data": "m7",
                    "class": 'text-center',
                    "sorting": false,
                    "orderable": false,
                    "render": function (data, type, row) {
                        if (data == 1) {
                            return '<span class="label label-success"><i class="fa fa-check"></i></span>';
                        }
                        if (data == 0) {
                            return '<span class="label label-danger"><i class="fa fa-times"></span>';
                        }
                    }
                },                 
                {
                    "targets": 12,
                    "data": "m8",
                    "class": 'text-center',
                    "sorting": false,
                    "orderable": false,
                    "render": function (data, type, row) {
                        if (data == 1) {
                            return '<span class="label label-success"><i class="fa fa-check"></i></span>';
                        }
                        if (data == 0) {
                            return '<span class="label label-danger"><i class="fa fa-times"></span>';
                        }
                    }
                },
                {
                    "targets": 13,
                    "data": "m9",
                    "class": 'text-center',
                    "sorting": false,
                    "orderable": false,
                    "render": function (data, type, row) {
                        if (data == 1) {
                            return '<span class="label label-success"><i class="fa fa-check"></i></span>';
                        }
                        if (data == 0) {
                            return '<span class="label label-danger"><i class="fa fa-times"></span>';
                        }
                    }
                }
                ,
                {
                    "targets": 14,
                    "data": "m10",
                    "class": 'text-center',
                    "sorting": false,
                    "orderable": false,
                    "render": function (data, type, row) {
                        if (data == 1) {
                            return '<span class="label label-success"><i class="fa fa-check"></i></span>';
                        }
                        if (data == 0) {
                            return '<span class="label label-danger"><i class="fa fa-times"></span>';
                        }
                    }
                },
                {
                    "targets": 15,
                    "data": "m11",
                    "class": 'text-center',
                    "sorting": false,
                    "orderable": false,
                    "render": function (data, type, row) {
                        if (data == 1) {
                            return '<span class="label label-success"><i class="fa fa-check"></i></span>';
                        }
                        if (data == 0) {
                            return '<span class="label label-danger"><i class="fa fa-times"></span>';
                        }
                    }
                },
                 {
                    "targets": 16,
                    "data": "m12",
                    "class": 'text-center',
                    "sorting": false,
                    "orderable": false,
                    "render": function (data, type, row) {
                        if (data == 1) {
                            return '<span class="label label-success"><i class="fa fa-check"></i></span>';
                        }
                        if (data == 0) {
                            return '<span class="label label-danger"><i class="fa fa-times"></span>';
                        }
                    }
                }                                                                     
                ],
                       initComplete: function () {
            this.api().columns().every( function () {
                var column = this;
                var select = $('<select><option value=""></option></select>')
                    .appendTo( $(column.footer()).empty() )
                    .on( 'change', function () {
                        var val = $.fn.dataTable.util.escapeRegex(
                            $(this).val()
                        );
 
                        column
                            .search( val ? '^'+val+'$' : '', true, false )
                            .draw();
                    } );
 
                column.data().unique().sort().each( function ( d, j ) {
                    select.append( '<option value="'+d+'">'+d+'</option>' );
                } );
            } );
                       }
            });

        })

        // $(document).ready(function () {
        //     $('#dt2').DataTable({
        //         responsive: true,
        //         "lengthMenu":  [[10, 25, 50, -1], [10, 25, 50, "All"]],
        //         "processing": true,
        //         "serverSide": false,
        //         "ordering": true,
        //         "ajax": {
        //             "url": "/Checks/completeness",
        //             "type": "POST"
        //         },
        //         "columns": [
        //                 { "data": "province", "autoWidth": true },
        //                 { "data": "district", "autoWidth": true },
        //                 { "data": "facilityID", "autoWidth": true },
        //                 { "data": "facilityName",  "autoWidth": true },
        //                 { "data": "implementer",  "autoWidth": true },
        //                 { "data": "message",  "autoWidth": true },
        //                 { "data": "statusId",  "autoWidth": true },
        //                 { "data": "year", "autoWidth": true },
        //                 { "data": "month", "autoWidth": true },
        //                 { "data": "ipdsaM_submission", "autoWidth": true },
        //                 { "data": "ipdsaM_stock_submission", "autoWidth": true },
        //                 { "data": "opdsaM_submission", "autoWidth": true },
        //                 { "data": "opdsaM_stock_submission", "autoWidth": true },
        //                 { "data": "opdmaM_submission", "autoWidth": true },
        //                 { "data": "opdmaM_stock_submission", "autoWidth": true },
        //                 { "data": "mnS_submission", "autoWidth": true },
        //                 { "data": "userName", "autoWidth": true }
        //         ],
        //     "columnDefs": [
        //         {
        //             "targets": 9,
        //             "data": "ipdsaM_submission",
        //             "class": 'text-center',
        //             "sorting": false,
        //             "orderable": false,
        //             "render": function (data, type, row) {
        //                 if (data == 1) {
        //                     return '<span class="label label-success"><i class="fa fa-check"></i></span>';
        //                 }
        //                 if (data == 0) {
        //                     return '<span class="label label-danger"><i class="fa fa-times"></i></span>';
        //                 }
        //             }
        //         },
        //         {
        //             "targets": 10,
        //             "data": "ipdsaM_stock_submission",
        //             "class": 'text-center',
        //             "sorting": false,
        //             "orderable": false,
        //             "render": function (data, type, row) {
        //                 if (data == 1) {
        //                     return '<span class="label label-success"><i class="fa fa-check"></i></span>';
        //                 }
        //                 if (data == 0) {
        //                     return '<span class="label label-danger"><i class="fa fa-times"></i></span>';
        //                 }
        //             }
        //         },

        //         {
        //             "targets": 11,
        //             "data": "opdsaM_submission",
        //             "class": 'text-center',
        //             "sorting": false,
        //             "orderable": false,
        //             "render": function (data, type, row) {
        //                 if (data == 1) {
        //                     return '<span class="label label-success"><i class="fa fa-check"></i></span>';
        //                 }
        //                 if (data == 0) {
        //                     return '<span class="label label-danger"><i class="fa fa-times"></i></span>';
        //                 }
        //             }
        //         },

        //         {
        //             "targets": 12,
        //             "data": "opdsaM_stock_submission",
        //             "class": 'text-center',
        //             "sorting": false,
        //             "orderable": false,
        //             "render": function (data, type, row) {
        //                 if (data == 1) {
        //                     return '<span class="label label-success"><i class="fa fa-check"></i></span>';
        //                 }
        //                 if (data == 0) {
        //                     return '<span class="label label-danger"><i class="fa fa-times"></i></span>';
        //                 }
        //             }
        //         },
        //         {
        //             "targets": 13,
        //             "data": "opdmaM_submission",
        //             "class": 'text-center',
        //             "sorting": false,
        //             "orderable": false,
        //             "render": function (data, type, row) {
        //                 if (data == 1) {
        //                     return '<span class="label label-success"><i class="fa fa-check"></i></span>';
        //                 }
        //                 if (data == 0) {
        //                     return '<span class="label label-danger"><i class="fa fa-times"></i></span>';
        //                 }
        //             }
        //         },                  
        //         {
        //             "targets": 14,
        //             "data": "opdmaM_stock_submission",
        //             "class": 'text-center',
        //             "sorting": false,
        //             "orderable": false,
        //             "render": function (data, type, row) {
        //                 if (data == 1) {
        //                     return '<span class="label label-success"><i class="fa fa-check"></i></span>';
        //                 }
        //                 if (data == 0) {
        //                     return '<span class="label label-danger"><i class="fa fa-times"></i></span>';
        //                 }
        //             }
        //         },
        //         {
        //             "targets": 15,
        //             "data": "mnS_submission",
        //             "class": 'text-center',
        //             "sorting": false,
        //             "orderable": false,
        //             "render": function (data, type, row) {
        //                 if (data == 1) {
        //                     return '<span class="label label-success"><i class="fa fa-check"></i></span>';
        //                 }
        //                 if (data == 0) {
        //                     return '<span class="label label-danger"><i class="fa fa-times"></i></span>';
        //                 }
        //             }
        //         },
        //         {
        //             "targets": 6,
        //             "data": "statusId",
        //             "class": 'text-center',
        //             "sorting": false,
        //             "orderable": false,
        //             "render": function (data, type, row) {
        //                 if (data == 1) {
        //                     return '<span class="label label-info">Processing</span>';
        //                 }
        //                 if (data == 2) {
        //                     return '<span class="label label-primary">Updated</i></span>';
        //                 }
        //                 if (data == 4) {
        //                     return '<span class="label label-danger">Rejected</i></span>';
        //                 }
        //                 if (data == 3) {
        //                     return '<span class="label label-success">Accepted</i></span>';
        //                 }
        //             }
        //         }                                
        //         ]
        //     });
        // })        
    </script>
}